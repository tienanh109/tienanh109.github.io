<!DOCTYPE html><html lang="vi"><head><meta charset="UTF-8"><title>Smart Tic Tac Toe AI</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',sans-serif;display:flex;flex-direction:column;align-items:center;min-height:100vh;background:linear-gradient(135deg,#1e3c72,#2a5298);color:white;padding:20px}.container{text-align:center;max-width:600px;width:100%}h1{font-size:2.5rem;margin-bottom:1rem;text-shadow:2px 2px 4px rgba(0,0,0,0.3)}.controls{display:flex;justify-content:center;gap:20px;margin-bottom:20px}.settings-btn,.language-btn{padding:8px 16px;background:rgba(255,255,255,0.1);border:none;border-radius:20px;color:white;cursor:pointer;transition:all 0.3s ease}.settings-btn:hover,.language-btn:hover{background:rgba(255,255,255,0.2)}.board{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:20px auto;max-width:400px;background:rgba(255,255,255,0.1);padding:15px;border-radius:15px;box-shadow:0 8px 32px rgba(0,0,0,0.1)}.cell{width:100px;height:100px;background:rgba(255,255,255,0.1);border:none;border-radius:10px;font-size:2.5rem;color:white;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center}.cell:hover{background:rgba(255,255,255,0.2);transform:scale(1.05)}.cell.x{color:#ff4757}.cell.o{color:#2ed573}.status{font-size:1.5rem;margin:20px 0;padding:10px 20px;background:rgba(255,255,255,0.1);border-radius:10px;min-height:60px;display:flex;align-items:center;justify-content:center}.restart-btn{padding:12px 30px;font-size:1.2rem;background:#ff4757;border:none;border-radius:25px;color:white;cursor:pointer;transition:all 0.3s ease}.restart-btn:hover{background:#ff6b81;transform:translateY(-2px)}.stats{margin-top:20px;padding:15px;background:rgba(255,255,255,0.1);border-radius:10px;display:flex;justify-content:space-around}.win{animation:win 0.5s ease}@keyframes win{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}.difficulty{display:flex;gap:10px;justify-content:center;margin:10px 0}.difficulty button{padding:8px 16px;border:none;border-radius:15px;cursor:pointer;transition:all 0.3s;background:rgba(255,255,255,0.1);color:white}.difficulty button.active{background:#2ed573}</style></head><body><div class="container"><div class="controls"><button class="language-btn" onclick="game.toggleLanguage()">üåê EN/VI</button><button class="settings-btn" onclick="game.toggleDifficulty()">‚öôÔ∏è</button></div><h1>Smart Tic Tac Toe AI</h1><div class="difficulty" style="display:none"><button class="diff-btn" data-diff="easy">Easy</button><button class="diff-btn active" data-diff="medium">Medium</button><button class="diff-btn" data-diff="hard">Hard</button></div><div class="status">Your turn (X)</div><div class="board"><button class="cell" data-index="0"></button><button class="cell" data-index="1"></button><button class="cell" data-index="2"></button><button class="cell" data-index="3"></button><button class="cell" data-index="4"></button><button class="cell" data-index="5"></button><button class="cell" data-index="6"></button><button class="cell" data-index="7"></button><button class="cell" data-index="8"></button></div><button class="restart-btn">Play Again</button><div class="stats"><div>Player: <span id="playerWins">0</span></div><div>AI: <span id="aiWins">0</span></div><div>Draws: <span id="draws">0</span></div></div></div><script>const translations={en:{title:'Smart Tic Tac Toe AI',yourTurn:'Your turn (X)',aiTurn:'AI thinking... (O)',win:'wins!',draw:"It's a draw!",playAgain:'Play Again',settings:'‚öôÔ∏è Settings',easy:'Easy',medium:'Medium',hard:'Hard',player:'Player',draws:'Draws'},vi:{title:'C·ªù Ca R√¥ AI Th√¥ng Minh',yourTurn:'L∆∞·ª£t c·ªßa b·∫°n (X)',aiTurn:'AI ƒëang suy nghƒ©... (O)',win:'th·∫Øng!',draw:'H√≤a!',playAgain:'Ch∆°i l·∫°i',settings:'‚öôÔ∏è C√†i ƒë·∫∑t',easy:'D·ªÖ',medium:'Trung b√¨nh',hard:'Kh√≥',player:'Ng∆∞·ªùi ch∆°i',draws:'H√≤a'}};class SmartTicTacToe{constructor(){this.board=Array(9).fill('');this.currentPlayer='X';this.gameActive=true;this.language='en';this.difficulty='medium';this.learningRate=0.3;this.moveHistory=[];this.aiMemory=new Map();this.cells=document.querySelectorAll('.cell');this.statusDisplay=document.querySelector('.status');this.restartBtn=document.querySelector('.restart-btn');this.diffBtns=document.querySelectorAll('.diff-btn');this.stats={playerWins:0,aiWins:0,draws:0};this.winPatterns=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];this.initializeGame();this.updateLanguage()}initializeGame(){this.cells.forEach(cell=>{cell.addEventListener('click',()=>this.handleCellClick(cell))});this.restartBtn.addEventListener('click',()=>this.restartGame());this.diffBtns.forEach(btn=>{btn.addEventListener('click',()=>this.setDifficulty(btn.dataset.diff))})}handleCellClick(cell){const index=cell.getAttribute('data-index');if(this.board[index]!==''||!this.gameActive)return;this.makeMove(index);if(this.gameActive){this.statusDisplay.textContent=translations[this.language].aiTurn;setTimeout(()=>this.makeAIMove(),500+Math.random()*500)}}makeMove(index){this.board[index]=this.currentPlayer;this.cells[index].textContent=this.currentPlayer;this.cells[index].classList.add(this.currentPlayer.toLowerCase());this.moveHistory.push({player:this.currentPlayer,position:index,board:[...this.board]});if(this.checkWin()){this.gameActive=false;const winner=this.currentPlayer==='X'?translations[this.language].player:'AI';this.statusDisplay.textContent=`${winner} ${translations[this.language].win}`;this.updateStats();this.highlightWinningCells();this.learnFromGame();return}if(this.checkDraw()){this.gameActive=false;this.statusDisplay.textContent=translations[this.language].draw;this.stats.draws++;this.updateStatsDisplay();this.learnFromGame();return}this.currentPlayer=this.currentPlayer==='X'?'O':'X';if(this.currentPlayer==='X'){this.statusDisplay.textContent=translations[this.language].yourTurn}}makeAIMove(){let bestMove;const randomChance=Math.random();if(this.difficulty==='easy'&&randomChance<0.4){bestMove=this.getRandomMove()}else if(this.difficulty==='medium'&&randomChance<0.2){bestMove=this.getRandomMove()}else{const boardKey=this.board.join('');if(this.aiMemory.has(boardKey)){const learnedMoves=this.aiMemory.get(boardKey);if(Math.random()<this.learningRate&&learnedMoves.length>0){bestMove=learnedMoves[Math.floor(Math.random()*learnedMoves.length)]}}if(bestMove===undefined){bestMove=this.minimax(this.board,'O',0).index}}if(bestMove!==undefined){this.makeMove(bestMove)}}getRandomMove(){const emptyCells=this.getEmptyCells(this.board);return emptyCells[Math.floor(Math.random()*emptyCells.length)]}minimax(board,player,depth=0){const availableSpots=this.getEmptyCells(board);if(this.checkWinningCondition(board,'X')){return{score:-10+depth}}else if(this.checkWinningCondition(board,'O')){return{score:10-depth}}else if(availableSpots.length===0){return{score:0}}const moves=[];for(let i=0;i<availableSpots.length;i++){const move={};move.index=availableSpots[i];board[availableSpots[i]]=player;if(player==='O'){const result=this.minimax(board,'X',depth+1);move.score=result.score}else{const result=this.minimax(board,'O',depth+1);move.score=result.score}board[availableSpots[i]]='';moves.push(move)}let bestMove;if(player==='O'){let bestScore=-Infinity;for(let i=0;i<moves.length;i++){if(moves[i].score>bestScore){bestScore=moves[i].score;bestMove=i}}}else{let bestScore=Infinity;for(let i=0;i<moves.length;i++){if(moves[i].score<bestScore){bestScore=moves[i].score;bestMove=i}}}return moves[bestMove]}learnFromGame(){if(this.currentPlayer==='O'){this.moveHistory.forEach(move=>{if(move.player==='O'){const boardKey=move.board.join('');if(!this.aiMemory.has(boardKey)){this.aiMemory.set(boardKey,[])}this.aiMemory.get(boardKey).push(move.position)}})}}getEmptyCells(board){return board.reduce((acc,cell,index)=>{if(cell==='')acc.push(index);return acc},[])}checkWin(){return this.winPatterns.some(pattern=>pattern.every(index=>this.board[index]===this.currentPlayer))}checkWinningCondition(board,player){return this.winPatterns.some(pattern=>pattern.every(index=>board[index]===player))}checkDraw(){return!this.board.includes('')}highlightWinningCells(){this.winPatterns.forEach(pattern=>{if(pattern.every(index=>this.board[index]===this.currentPlayer)){pattern.forEach(index=>this.cells[index].classList.add('win'))}})}updateStats(){if(this.currentPlayer==='X'){this.stats.playerWins++}else{this.stats.aiWins++}this.updateStatsDisplay()}updateStatsDisplay(){document.getElementById('playerWins').textContent=this.stats.playerWins;document.getElementById('aiWins').textContent=this.stats.aiWins;document.getElementById('draws').textContent=this.stats.draws}restartGame(){this.board=Array(9).fill('');this.currentPlayer='X';this.gameActive=true;this.statusDisplay.textContent=translations[this.language].yourTurn;this.cells.forEach(cell=>{cell.textContent='';cell.classList.remove('x','o','win')});this.moveHistory=[]}setDifficulty(diff){this.difficulty=diff;this.diffBtns.forEach(btn=>{btn.classList.toggle('active',btn.dataset.diff===diff)})}toggleDifficulty(){const diffDiv=document.querySelector('.difficulty');diffDiv.style.display=diffDiv.style.display==='none'?'flex':'none'}toggleLanguage(){this.language=this.language==='en'?'vi':'en';this.updateLanguage()}updateLanguage(){document.querySelector('h1').textContent=translations[this.language].title;this.restartBtn.textContent=translations[this.language].playAgain;this.statusDisplay.textContent=this.currentPlayer==='X'?translations[this.language].yourTurn:translations[this.language].aiTurn;document.querySelectorAll('.diff-btn').forEach((btn,i)=>{btn.textContent=translations[this.language][['easy','medium','hard'][i]]})}}const game=new SmartTicTacToe();</script></body></html>
